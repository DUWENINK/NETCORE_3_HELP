/*! jQuery Validation Plugin - v1.11.1 - 3/22/2013\n* https://github.com/jzaefferer/jquery-validation
* Copyright (c) 2013 JÃ¶rn Zaefferer; Licensed MIT */
(function(n){n.extend(n.fn,{validate:function(t){if(!this.length)return t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."),void 0;var i=n.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new n.validator(t,this[0]),n.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(t){i.settings.submitHandler&&(i.submitButton=t.target);n(t.target).hasClass("cancel")&&(i.cancelSubmit=!0);void 0!==n(t.target).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.submit(function(t){function r(){var r;return i.settings.submitHandler?(i.submitButton&&(r=n("<input type='hidden'/>").attr("name",i.submitButton.name).val(n(i.submitButton).val()).appendTo(i.currentForm)),i.settings.submitHandler.call(i,i.currentForm,t),i.submitButton&&r.remove(),!1):!0}return i.settings.debug&&t.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,r()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):r():(i.focusInvalid(),!1)})),i)},valid:function(){if(n(this[0]).is("form"))return this.validate().form();var t=!0,i=n(this[0].form).validate();return this.each(function(){t=t&&i.element(this)}),t},removeAttrs:function(t){var i={},r=this;return n.each(t.split(/\s/),function(n,t){i[t]=r.attr(t);r.removeAttr(t)}),i},rules:function(t,i){var r=this[0],o,u,h;if(t){var e=n.data(r.form,"validator").settings,s=e.rules,f=n.validator.staticRules(r);switch(t){case"add":n.extend(f,n.validator.normalizeRule(i));delete f.messages;s[r.name]=f;i.messages&&(e.messages[r.name]=n.extend(e.messages[r.name],i.messages));break;case"remove":return i?(o={},n.each(i.split(/\s/),function(n,t){o[t]=f[t];delete f[t]}),o):(delete s[r.name],f)}}return u=n.validator.normalizeRules(n.extend({},n.validator.classRules(r),n.validator.attributeRules(r),n.validator.dataRules(r),n.validator.staticRules(r)),r),u.required&&(h=u.required,delete u.required,u=n.extend({required:h},u)),u}});n.extend(n.expr[":"],{blank:function(t){return!n.trim(""+n(t).val())},filled:function(t){return!!n.trim(""+n(t).val())},unchecked:function(t){return!n(t).prop("checked")}});n.validator=function(t,i){this.settings=n.extend(!0,{},n.validator.defaults,t);this.currentForm=i;this.init()};n.validator.format=function(t,i){return 1===arguments.length?function(){var i=n.makeArray(arguments);return i.unshift(t),n.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=n.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),n.each(i,function(n,i){t=t.replace(RegExp("\\{"+n+"\\}","g"),function(){return i})}),t)};n.extend(n.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:n([]),errorLabelContainer:n([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(n){this.lastActive=n;this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,n,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(n)).hide())},onfocusout:function(n){!this.checkable(n)&&(n.name in this.submitted||!this.optional(n))&&this.element(n)},onkeyup:function(n,t){(9!==t.which||""!==this.elementValue(n))&&(n.name in this.submitted||n===this.lastElement)&&this.element(n)},onclick:function(n){n.name in this.submitted?this.element(n):n.parentNode.name in this.submitted&&this.element(n.parentNode)},highlight:function(t,i,r){"radio"===t.type?this.findByName(t.name).addClass(i).removeClass(r):n(t).addClass(i).removeClass(r)},unhighlight:function(t,i,r){"radio"===t.type?this.findByName(t.name).removeClass(i).addClass(r):n(t).removeClass(i).addClass(r)}},setDefaults:function(t){n.extend(n.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:n.validator.format("Please enter no more than {0} characters."),minlength:n.validator.format("Please enter at least {0} characters."),rangelength:n.validator.format("Please enter a value between {0} and {1} characters long."),range:n.validator.format("Please enter a value between {0} and {1}."),max:n.validator.format("Please enter a value less than or equal to {0}."),min:n.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function i(t){var i=n.data(this[0].form,"validator"),r="on"+t.type.replace(/^validate/,"");i.settings[r]&&i.settings[r].call(i,this[0],t)}var r,t;this.labelContainer=n(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||n(this.currentForm);this.containers=n(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();r=this.groups={};n.each(this.settings.groups,function(t,i){"string"==typeof i&&(i=i.split(/\s/));n.each(i,function(n,i){r[i]=t})});t=this.settings.rules;n.each(t,function(i,r){t[i]=n.validator.normalizeRule(r)});n(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",i).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",i);this.settings.invalidHandler&&n(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),n.extend(this.submitted,this.errorMap),this.invalid=n.extend({},this.errorMap),this.valid()||n(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var n=0,t=this.currentElements=this.elements();t[n];n++)this.check(t[n]);return this.valid()},element:function(t){t=this.validationTargetFor(this.clean(t));this.lastElement=t;this.prepareElement(t);this.currentElements=n(t);var i=this.check(t)!==!1;return i?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(t){if(t){n.extend(this.errorMap,t);this.errorList=[];for(var i in t)this.errorList.push({message:t[i],element:this.findByName(i)[0]});this.successList=n.grep(this.successList,function(n){return!(n.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){n.fn.resetForm&&n(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(n){var t=0;for(var i in n)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{n(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&1===n.grep(this.errorList,function(n){return n.element.name===t.name}).length&&t},elements:function(){var t=this,i={};return n(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!t.objectLength(n(this).rules())?!1:(i[this.name]=!0,!0)})},clean:function(t){return n(t)[0]},errors:function(){var t=this.settings.errorClass.replace(" ",".");return n(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=n([]);this.toHide=n([]);this.currentElements=n([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(n){this.reset();this.toHide=this.errorsFor(n)},elementValue:function(t){var r=n(t).attr("type"),i=n(t).val();return"radio"===r||"checkbox"===r?n("input[name='"+n(t).attr("name")+"']:checked").val():"string"==typeof i?i.replace(/\r/g,""):i},check:function(t){var r,u;t=this.validationTargetFor(this.clean(t));var i,f=n(t).rules(),e=!1,s=this.elementValue(t);for(r in f){u={method:r,parameters:f[r]};try{if(i=n.validator.methods[r].call(this,s,t,u.parameters),"dependency-mismatch"===i){e=!0;continue}if(e=!1,"pending"===i)return this.toHide=this.toHide.not(this.errorsFor(t)),void 0;if(!i)return this.formatAndAdd(t,u),!1}catch(o){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+u.method+"' method.",o),o;}}if(!e)return(this.objectLength(f)&&this.successList.push(t),!0)},customDataMessage:function(t,i){return n(t).data("msg-"+i.toLowerCase())||t.attributes&&n(t).attr("data-msg-"+i.toLowerCase())},customMessage:function(n,t){var i=this.settings.messages[n];return i&&(i.constructor===String?i:i[t])},findDefined:function(){for(var n=0;arguments.length>n;n++)if(void 0!==arguments[n])return arguments[n];return void 0},defaultMessage:function(t,i){return this.findDefined(this.customMessage(t.name,i),this.customDataMessage(t,i),!this.settings.ignoreTitle&&t.title||void 0,n.validator.messages[i],"<strong>Warning: No message defined for "+t.name+"<\/strong>")},formatAndAdd:function(t,i){var r=this.defaultMessage(t,i.method),u=/\$?\{(\d+)\}/g;"function"==typeof r?r=r.call(this,i.parameters,t):u.test(r)&&(r=n.validator.format(r.replace(u,"{$1}"),i.parameters));this.errorList.push({message:r,element:t});this.errorMap[t.name]=r;this.submitted[t.name]=r},addWrapper:function(n){return this.settings.wrapper&&(n=n.add(n.parent(this.settings.wrapper))),n},defaultShowErrors:function(){for(var i,t,n=0;this.errorList[n];n++)t=this.errorList[n],this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(n=0;this.successList[n];n++)this.showLabel(this.successList[n]);if(this.settings.unhighlight)for(n=0,i=this.validElements();i[n];n++)this.settings.unhighlight.call(this,i[n],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return n(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var r=this.errorsFor(t);r.length?(r.removeClass(this.settings.validClass).addClass(this.settings.errorClass),r.html(i)):(r=n("<"+this.settings.errorElement+">").attr("for",this.idOrName(t)).addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(r=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(r).length||(this.settings.errorPlacement?this.settings.errorPlacement(r,n(t)):r.insertAfter(t)));!i&&this.settings.success&&(r.text(""),"string"==typeof this.settings.success?r.addClass(this.settings.success):this.settings.success(r,t));this.toShow=this.toShow.add(r)},errorsFor:function(t){var i=this.idOrName(t);return this.errors().filter(function(){return n(this).attr("for")===i})},idOrName:function(n){return this.groups[n.name]||(this.checkable(n)?n.name:n.id||n.name)},validationTargetFor:function(n){return this.checkable(n)&&(n=this.findByName(n.name).not(this.settings.ignore)[0]),n},checkable:function(n){return/radio|checkbox/i.test(n.type)},findByName:function(t){return n(this.currentForm).find("[name='"+t+"']")},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return n("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(n,t){return this.dependTypes[typeof n]?this.dependTypes[typeof n](n,t):!0},dependTypes:{boolean:function(n){return n},string:function(t,i){return!!n(t,i.form).length},"function":function(n,t){return n(t)}},optional:function(t){var i=this.elementValue(t);return!n.validator.methods.required.call(this,i,t)&&"dependency-mismatch"},startRequest:function(n){this.pending[n.name]||(this.pendingRequest++,this.pending[n.name]=!0)},stopRequest:function(t,i){this.pendingRequest--;0>this.pendingRequest&&(this.pendingRequest=0);delete this.pending[t.name];i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(n(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(n(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return n.data(t,"previousValue")||n.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor===String?this.classRuleSettings[t]=i:n.extend(this.classRuleSettings,t)},classRules:function(t){var i={},r=n(t).attr("class");return r&&n.each(r.split(" "),function(){this in n.validator.classRuleSettings&&n.extend(i,n.validator.classRuleSettings[this])}),i},attributeRules:function(t){var u={},e=n(t),f=e[0].getAttribute("type"),r,i;for(r in n.validator.methods)"required"===r?(i=e.get(0).getAttribute(r),""===i&&(i=!0),i=!!i):i=e.attr(r),/min|max/.test(r)&&(null===f||/number|range|text/.test(f))&&(i=Number(i)),i?u[r]=i:f===r&&"range"!==f&&(u[r]=!0);return u.maxlength&&/-1|2147483647|524288/.test(u.maxlength)&&delete u.maxlength,u},dataRules:function(t){var i,r,u={},f=n(t);for(i in n.validator.methods)r=f.data("rule-"+i.toLowerCase()),void 0!==r&&(u[i]=r);return u},staticRules:function(t){var i={},r=n.data(t.form,"validator");return r.settings.rules&&(i=n.validator.normalizeRule(r.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return n.each(t,function(r,u){if(u===!1)return delete t[r],void 0;if(u.param||u.depends){var f=!0;switch(typeof u.depends){case"string":f=!!n(u.depends,i.form).length;break;case"function":f=u.depends.call(i,i)}f?t[r]=void 0!==u.param?u.param:!0:delete t[r]}}),n.each(t,function(r,u){t[r]=n.isFunction(u)?u(i):u}),n.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),n.each(["rangelength","range"],function(){var i;t[this]&&(n.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(i=t[this].split(/[\s,]+/),t[this]=[Number(i[0]),Number(i[1])]))}),n.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var i={};n.each(t.split(/\s/),function(){i[this]=!0});t=i}return t},addMethod:function(t,i,r){n.validator.methods[t]=i;n.validator.messages[t]=void 0!==r?r:n.validator.messages[t];3>i.length&&n.validator.addClassRules(t,n.validator.normalizeRule(t))},methods:{required:function(t,i,r){if(!this.depend(r,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var u=n(i).val();return u&&u.length>0}return this.checkable(i)?this.getLength(t,i)>0:n.trim(t).length>0},email:function(n,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(n)},url:function(n,t){return this.optional(t)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(n)},date:function(n,t){return this.optional(t)||!/Invalid|NaN/.test(""+new Date(n))},dateISO:function(n,t){return this.optional(t)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(n)},number:function(n,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(n)},digits:function(n,t){return this.optional(t)||/^\d+$/.test(n)},creditcard:function(n,t){var r,e;if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(n))return!1;var f=0,i=0,u=!1;for(n=n.replace(/\D/g,""),r=n.length-1;r>=0;r--)e=n.charAt(r),i=parseInt(e,10),u&&(i*=2)>9&&(i-=9),f+=i,u=!u;return 0==f%10},minlength:function(t,i,r){var u=n.isArray(t)?t.length:this.getLength(n.trim(t),i);return this.optional(i)||u>=r},maxlength:function(t,i,r){var u=n.isArray(t)?t.length:this.getLength(n.trim(t),i);return this.optional(i)||r>=u},rangelength:function(t,i,r){var u=n.isArray(t)?t.length:this.getLength(n.trim(t),i);return this.optional(i)||u>=r[0]&&r[1]>=u},min:function(n,t,i){return this.optional(t)||n>=i},max:function(n,t,i){return this.optional(t)||i>=n},range:function(n,t,i){return this.optional(t)||n>=i[0]&&i[1]>=n},equalTo:function(t,i,r){var u=n(r);return this.settings.onfocusout&&u.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){n(i).valid()}),t===u.val()},remote:function(t,i,r){var f,u,e;return this.optional(i)?"dependency-mismatch":(f=this.previousValue(i),this.settings.messages[i.name]||(this.settings.messages[i.name]={}),f.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=f.message,r="string"==typeof r&&{url:r}||r,f.old===t)?f.valid:(f.old=t,u=this,this.startRequest(i),e={},e[i.name]=t,n.ajax(n.extend(!0,{url:r,mode:"abort",port:"validate"+i.name,dataType:"json",data:e,success:function(r){var e,h,s,o;u.settings.messages[i.name].remote=f.originalMessage;e=r===!0||"true"===r;e?(h=u.formSubmitted,u.prepareElement(i),u.formSubmitted=h,u.successList.push(i),delete u.invalid[i.name],u.showErrors()):(s={},o=r||u.defaultMessage(i,"remote"),s[i.name]=f.message=n.isFunction(o)?o(t):o,u.invalid[i.name]=!0,u.showErrors(s));f.valid=e;u.stopRequest(i,e)}},r)),"pending")}}});n.format=n.validator.format})(jQuery),function(n){var t={},i;n.ajaxPrefilter?n.ajaxPrefilter(function(n,i,r){var u=n.port;"abort"===n.mode&&(t[u]&&t[u].abort(),t[u]=r)}):(i=n.ajax,n.ajax=function(r){var f=("mode"in r?r:n.ajaxSettings).mode,u=("port"in r?r:n.ajaxSettings).port;return"abort"===f?(t[u]&&t[u].abort(),t[u]=i.apply(this,arguments),t[u]):i.apply(this,arguments)})}(jQuery),function(n){n.extend(n.fn,{validateDelegate:function(t,i,r){return this.bind(i,function(i){var u=n(i.target);if(u.is(t))return r.apply(u,arguments)})}})}(jQuery),function(n){function i(n,t,i){n.rules[t]=i;n.message&&(n.messages[t]=n.message)}function h(n){return n.replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g)}function f(n){return n.replace(/([!"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~])/g,"\\$1")}function e(n){return n.substr(0,n.lastIndexOf(".")+1)}function o(n,t){return n.indexOf("*.")===0&&(n=n.replace("*.",t)),n}function c(t,i){var r=n(this).find("[data-valmsg-for='"+f(i[0].name)+"']"),u=r.attr("data-valmsg-replace"),e=u?n.parseJSON(u)!==!1:null;r.removeClass("field-validation-valid").addClass("field-validation-error");t.data("unobtrusiveContainer",r);e?(r.empty(),t.removeClass("input-validation-error").appendTo(r)):t.hide()}function l(t,i){var u=n(this).find("[data-valmsg-summary=true]"),r=u.find("ul");r&&r.length&&i.errorList.length&&(r.empty(),u.addClass("validation-summary-errors").removeClass("validation-summary-valid"),n.each(i.errorList,function(){n("<li />").html(this.message).appendTo(r)}))}function a(t){var i=t.data("unobtrusiveContainer"),r=i.attr("data-valmsg-replace"),u=r?n.parseJSON(r):null;i&&(i.addClass("field-validation-valid").removeClass("field-validation-error"),t.removeData("unobtrusiveContainer"),u&&i.empty())}function v(){var t=n(this),i="__jquery_unobtrusive_validation_form_reset";if(!t.data(i)){t.data(i,!0);try{t.data("validator").resetForm()}finally{t.removeData(i)}t.find(".validation-summary-errors").addClass("validation-summary-valid").removeClass("validation-summary-errors");t.find(".field-validation-error").addClass("field-validation-valid").removeClass("field-validation-error").removeData("unobtrusiveContainer").find(">*").removeData("unobtrusiveContainer")}}function s(t){var i=n(t),f=i.data(u),s=n.proxy(v,t),e=r.unobtrusive.options||{},o=function(i,r){var u=e[i];u&&n.isFunction(u)&&u.apply(t,r)};return f||(f={options:{errorClass:e.errorClass||"input-validation-error",errorElement:e.errorElement||"span",errorPlacement:function(){c.apply(t,arguments);o("errorPlacement",arguments)},invalidHandler:function(){l.apply(t,arguments);o("invalidHandler",arguments)},messages:{},rules:{},success:function(){a.apply(t,arguments);o("success",arguments)}},attachValidation:function(){i.off("reset."+u,s).on("reset."+u,s).validate(this.options)},validate:function(){return i.validate(),i.valid()}},i.data(u,f)),f}var r=n.validator,t,u="unobtrusiveValidation";r.unobtrusive={adapters:[],parseElement:function(t,i){var u=n(t),f=u.parents("form")[0],r,e,o;f&&(r=s(f),r.options.rules[t.name]=e={},r.options.messages[t.name]=o={},n.each(this.adapters,function(){var i="data-val-"+this.name,r=u.attr(i),s={};r!==undefined&&(i+="-",n.each(this.params,function(){s[this]=u.attr(i+this)}),this.adapt({element:t,form:f,message:r,params:s,rules:e,messages:o}))}),n.extend(e,{__dummy__:!0}),i||r.attachValidation())},parse:function(t){var i=n(t),u=i.parents().addBack().filter("form").add(i.find("form")).has("[data-val=true]");i.find("[data-val=true]").each(function(){r.unobtrusive.parseElement(this,!0)});u.each(function(){var n=s(this);n&&n.attachValidation()})}};t=r.unobtrusive.adapters;t.add=function(n,t,i){return i||(i=t,t=[]),this.push({name:n,params:t,adapt:i}),this};t.addBool=function(n,t){return this.add(n,function(r){i(r,t||n,!0)})};t.addMinMax=function(n,t,r,u,f,e){return this.add(n,[f||"min",e||"max"],function(n){var f=n.params.min,e=n.params.max;f&&e?i(n,u,[f,e]):f?i(n,t,f):e&&i(n,r,e)})};t.addSingleVal=function(n,t,r){return this.add(n,[t||"val"],function(u){i(u,r||n,u.params[t])})};r.addMethod("__dummy__",function(){return!0});r.addMethod("regex",function(n,t,i){var r;return this.optional(t)?!0:(r=new RegExp(i).exec(n),r&&r.index===0&&r[0].length===n.length)});r.addMethod("nonalphamin",function(n,t,i){var r;return i&&(r=n.match(/\W/g),r=r&&r.length>=i),r});r.methods.extension?(t.addSingleVal("accept","mimtype"),t.addSingleVal("extension","extension")):t.addSingleVal("extension","extension","accept");t.addSingleVal("regex","pattern");t.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url");t.addMinMax("length","minlength","maxlength","rangelength").addMinMax("range","min","max","range");t.addMinMax("minlength","minlength").addMinMax("maxlength","minlength","maxlength");t.add("equalto",["other"],function(t){var r=e(t.element.name),u=t.params.other,s=o(u,r),h=n(t.form).find(":input").filter("[name='"+f(s)+"']")[0];i(t,"equalTo",h)});t.add("required",function(n){(n.element.tagName.toUpperCase()!=="INPUT"||n.element.type.toUpperCase()!=="CHECKBOX")&&i(n,"required",!0)});t.add("remote",["url","type","additionalfields"],function(t){var r={url:t.params.url,type:t.params.type||"GET",data:{}},u=e(t.element.name);n.each(h(t.params.additionalfields||t.element.name),function(i,e){var s=o(e,u);r.data[s]=function(){var i=n(t.form).find(":input").filter("[name='"+f(s)+"']");return i.is(":checkbox")?i.filter(":checked").val()||i.filter(":hidden").val()||"":i.is(":radio")?i.filter(":checked").val()||"":i.val()}});i(t,"remote",r)});t.add("password",["min","nonalphamin","regex"],function(n){n.params.min&&i(n,"minlength",n.params.min);n.params.nonalphamin&&i(n,"nonalphamin",n.params.nonalphamin);n.params.regex&&i(n,"regex",n.params.regex)});n(function(){r.unobtrusive.parse(document)})}(jQuery);!function(n){n.fn.bsSuggest=function(n){return"string"==typeof n&&t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void 0:t.init.apply(this,arguments)};var t={init:function(t){function e(t,i,r){return i.is(":visible")?void setTimeout(function(){r.autoDropup&&n(window).height()-t.offset().top<i.height()&&t.offset().top>i.height()+n(window).scrollTop()?i.parents(".input-group").addClass("dropup"):i.parents(".input-group.dropup").removeClass("dropup")},100):("left"===r.listAlign?i.css({left:t.siblings("div").width()-t.parent().width(),right:"auto"}):"right"===r.listAlign&&i.css({left:"auto",right:"0"}),r.autoMinWidth===!1?i.css({"min-width":t.parent().width()}):i.css("width","auto"),t)}function o(n,t){var r,u,i;return-1===t.indexId&&!t.idField||t.multiWord?n:(r=n.css("background-color").replace(/ /g,"").split(",",3).join(","),u=t.inputBgColor||"rgba(255,255,255,0.1)",i=t.inputWarnColor||"rgba(255,255,0,0.1)",!n.val()||n.attr("data-id")?n.css("background",u):(-1===i.indexOf(r)&&(n.trigger("onUnsetSelectValue"),n.css("background",i)),n))}function a(n,t){var u,r,f=n.parent().find("tbody tr."+i.listHoverCSS);f.length>0&&(u=(f.index()+3)*f.height(),r=Number(t.css("max-height").replace("px","")),t.scrollTop(u>r||t.scrollTop()>r?u-r:0))}function r(n,t){n=n||$dropdownMenu;t=t||i;n.find("tr."+t.listHoverCSS).removeClass(t.listHoverCSS)}function k(t){var r=n(t),u=r.parent(".input-group").find("ul.dropdown-menu"),f=r.data("bsSuggest");return 0===u.length?!1:f?!1:(r.data("bsSuggest",{target:t,options:i}),!0)}function f(t,r,u,f){var e,w,o,s,l,a,y,c={value:[]};if(t=t||"",f=f||i,f.url)l=-1!==f.url.indexOf("?")?"&":"?",a=f.jsonp?[f.url+t,l,f.jsonp,"=?"].join(""):f.url+t,n.ajax({type:"GET",url:a,dataType:"json",timeout:3e3}).done(function(n){u(r,n,f);r.trigger("onDataRequestSuccess",n);"firstByUrl"===i.getDataMethod&&(i.data=n,i.url=null)}).fail(p);else{if(e=f.data,w=v(e))if(t){for(y=e.value.length,o=0;y>o;o++)for(s in e.value[o])if(n.trim(e.value[o][s])&&(d(s,f)||h(s,f))&&(-1!==e.value[o][s].toString().indexOf(t)||-1!==t.indexOf(e.value[o][s]))){c.value.push(e.value[o]);break}}else c=e;u(r,c,f)}}function s(n){return validData=v(n)}function v(n){var t=!0;for(var i in n)if("value"===i){t=!1;break}return t?(p("è¿åæ°æ®æ ¼å¼éè¯¯!"),!1):0===n.value.length?!1:n}function h(t,r){return r=r||i,n.isArray(r.effectiveFields)&&r.effectiveFields.length>0&&-1===n.inArray(t,r.effectiveFields)?!1:!0}function d(t,i){return-1!==n.inArray(t,i.searchFields)?!0:!1}function c(n,t,r){var w,o,u,v,l,y,p,f=n.parent().find("ul.dropdown-menu"),c=0,a=['<table class="table table-condensed">'];if(r=r||i,t=s(t),t===!1||0===(w=t.value.length))return f.empty().hide(),n;if(r.showHeader){v="<thead><tr>";for(u in t.value[0])h(u)!==!1&&(v+=0===c?"<th>"+(r.effectiveFieldsAlias[u]||u)+"("+w+")<\/th>":"<th>"+(r.effectiveFieldsAlias[u]||u)+"<\/th>",c++);v+="<\/tr><\/thead>";a.push(v)}for(a.push("<tbody>"),o=0;w>o;o++){c=0;l="";y=t.value[o][r.idField]||"";p=t.value[o][r.keyField]||"";for(u in t.value[o])p||r.indexKey!==c||(p=t.value[o][u]),y||r.indexId!==c||(y=t.value[o][u]),c++,h(u)!==!1&&(l+='<td data-name="'+u+'">'+t.value[o][u]+"<\/td>");l='<tr data-index="'+o+'" data-id="'+y+'" data-key="'+p+'">'+l+"<\/tr>";a.push(l)}return a.push("<\/tbody><\/table>"),f.html(a.join("")).show(),g(n,f,r),f.css("max-height")&&Number(f.css("max-height").replace("px",""))<Number(f.find("table:eq(0)").css("height").replace("px",""))&&Number(f.css("min-width").replace("px",""))<Number(f.css("width").replace("px",""))?f.css("padding-right","20px").find("table:eq(0)").css("margin-bottom","20px"):f.css("padding-right",0).find("table:eq(0)").css("margin-bottom",0),e(n,f,r),n}function g(t,f,e){f=f||$dropdownMenu;e=e||i;f.find("tbody tr").each(function(){n(this).off("mouseenter").on("mouseenter",function(){r(f,e);n(this).addClass(e.listHoverCSS)}).off("mousedown").on("mousedown",function(){y(t,u(n(this)),e);o(t,e)})})}function u(n){var t={};return t.id=n.attr("data-id"),t.key=n.attr("data-key"),t}function y(n,t,i){var r,u=t||{},e=u.id||"",f=u.key||"";i&&i.multiWord?(r=n.val().split(i.separator||" "),r[r.length-1]=f,n.val(r.join(i.separator||" ")).focus()):n.attr("data-id",e).focus().val(f);n.trigger("onSetSelectValue",u)}function p(n,t){console.trace(n);t&&console.trace(t)}var w=this,i=n.extend({url:null,jsonp:null,data:{},getDataMethod:"firstByUrl",delayUntilKeyup:!1,indexId:0,indexKey:0,idField:"",keyField:"",effectiveFields:[],effectiveFieldsAlias:{},searchFields:[],showHeader:!1,showBtn:!0,allowNoKeyword:!0,multiWord:!1,separator:",",processData:s,getData:f,autoMinWidth:!1,autoDropup:!1,listAlign:"left",inputBgColor:"",inputWarnColor:"rgba(255,0,0,.1)",listStyle:{"padding-top":0,"max-height":"375px","max-width":"800px",overflow:"auto",width:"auto",transition:"0.3s","-webkit-transition":"0.3s","-moz-transition":"0.3s","-o-transition":"0.3s"},listHoverStyle:"background: #07d; color:#fff",listHoverCSS:"jhover",keyLeft:37,keyUp:38,keyRight:39,keyDown:40,keyEnter:13},t),b,l;return(n.isFunction(i.processData)&&(s=i.processData),n.isFunction(i.getData)&&(f=i.getData),!t.showHeader&&i.effectiveFields&&i.effectiveFields.length>1&&(i.showHeader=!0),"firstByUrl"===i.getDataMethod&&i.url&&!i.delayUntilKeyup)&&(b=-1!==t.url.indexOf("?")?"&":"?",l=t.jsonp?[t.url,b,t.jsonp,"=?"].join(""):t.url,n.ajax({type:"GET",url:l,dataType:"json",timeout:5e3}).done(function(t){i.data=t;i.url=null;n(w).trigger("onDataRequestSuccess",t)}).fail(function(n,t){console.error(l+" : "+t)})),n("head:eq(0)").append("<style>."+i.listHoverCSS+"{"+i.listHoverStyle+"}<\/style>"),w.each(function(){var h=n(this),s=h.parents(".input-group:eq(0)").find("ul.dropdown-menu");return k(this)===!1?void console.warn("ä¸æ¯ä¸ä¸ªæ åç bootstrap ä¸æå¼èå:",this):(i.showBtn||h.css("border-radius","4px").parents(".input-group:eq(0)").css("width","100%").find(".input-group-btn>.btn").hide(),h.removeClass("disabled").attr("disabled",!1).attr("autocomplete","off"),s.css(i.listStyle),i.inputBgColor||(i.inputBgColor=h.css("background-color")),h.on("keydown",function(t){var f,e="";"none"!==s.css("display")&&(f=s.find("."+i.listHoverCSS),e="",t.keyCode===i.keyDown?(0===f.length?e=u(s.find("table tbody tr:first").mouseover()):0===f.next().length?(r(s,i),n(this).val(n(this).attr("alt")).attr("data-id","")):(r(s,i),0!==f.next().length&&(e=u(f.next().mouseover()))),a(h,s)):t.keyCode===i.keyUp?(0===f.length?e=u(s.find("table tbody tr:last").mouseover()):0===f.prev().length?(r(s,i),n(this).val(n(this).attr("alt")).attr("data-id","")):(r(s,i),0!==f.prev().length&&(e=u(f.prev().mouseover()))),a(h,s)):t.keyCode===i.keyEnter?s.hide().empty():n(this).attr("data-id",""),e&&""!==e.key&&y(n(this),e,i))}).on("keyup",function(r){var u,e;return r.keyCode===i.keyDown||r.keyCode===i.keyUp||r.keyCode===i.keyEnter?(n(this).val(n(this).val()),void o(h,i)):(n(this).attr("data-id",""),o(h,i),u=n(this).val(),void((""===n.trim(u)||u!==n(this).attr("alt"))&&(n(this).attr("alt",n(this).val()),t.multiWord&&(e=u.split(i.separator||" "),u=e[e.length-1]),(0!==u.length||i.allowNoKeyword)&&f(n.trim(u),h,c,i))))}).on("focus",function(){e(h,s,i)}).on("blur",function(){s.css("display","")}).on("click",function(){var r,t=n(this).val();return""!==n.trim(t)&&t===n(this).attr("alt")&&s.find("table tr").length?s.show():void("none"===s.css("display")&&(i.multiWord&&(r=t.split(i.separator||" "),t=r[r.length-1]),(0!==t.length||i.allowNoKeyword)&&f(n.trim(t),h,c,i)))}),h.parent().find("button:eq(0)").attr("data-toggle","").on("click",function(){var n;"none"===s.css("display")?(n="block",i.url?h.click().focus():(c(h,i.data,i),e(h,s,i))):n="none";s.css("display",n)}),void s.on("mouseenter",function(){n(this).show()}).on("mouseleave",function(){h.focus()}))})},show:function(){var n=this.data("bsSuggest");return n&&n.options&&this.parent().find("ul.dropdown-menu").show(),this},hide:function(){var n=this.data("bsSuggest");return n&&n.options&&this.parent().find("ul.dropdown-menu").css("display",""),this},disable:function(){return n(this).data("bsSuggest")?void n(this).attr("disabled",!0).parent().find(".input-group-btn>.btn").addClass("disabled"):!1},enable:function(){return n(this).data("bsSuggest")?void n(this).attr("disabled",!1).parent().find(".input-group-btn>.btn").removeClass("disabled"):!1},destroy:function(){n(this).off().removeData("bsSuggest").parent().find(".input-group-btn>.btn").off()},version:function(){return"0.0.1"}}}(window.jQuery),function(n,t){function u(){return new Date(Date.UTC.apply(Date,arguments))}function e(){var n=new Date;return u(n.getFullYear(),n.getMonth(),n.getDate())}function c(n){return function(){return this[n].apply(this,arguments)}}function y(t,i){function s(n,t){return t.toLowerCase()}var u=n(t).data(),f={},e,o=new RegExp("^"+i.toLowerCase()+"([A-Z])"),r;i=new RegExp("^"+i.toLowerCase());for(r in u)i.test(r)&&(e=r.replace(o,s),f[e]=u[r]);return f}function p(t){var u={},i;if(r[t]||(t=t.split("-")[0],r[t]))return i=r[t],n.each(v,function(n,t){t in i&&(u[t]=i[t])}),u}var s=n(window),l=function(){var t={get:function(n){return this.slice(n)[0]},contains:function(n){for(var i=n&&n.valueOf(),t=0,r=this.length;t<r;t++)if(this[t].valueOf()===i)return t;return-1},remove:function(n){this.splice(n,1)},replace:function(t){t&&(n.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t))},clear:function(){this.splice(0)},copy:function(){var n=new l;return n.replace(this),n}};return function(){var i=[];return i.push.apply(i,arguments),n.extend(i,t),i}}(),f=function(t,r){this.dates=new l;this.viewDate=e();this.focusDate=null;this._process_options(r);this.element=n(t);this.isInline=!1;this.isInput=this.element.is("input");this.component=this.element.is(".date")?this.element.find(".add-on, .input-group-addon, .btn"):!1;this.hasInput=this.component&&this.element.find("input").length;this.component&&this.component.length===0&&(this.component=!1);this.picker=n(i.template);this._buildEvents();this._attachEvents();this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu");this.o.rtl&&this.picker.addClass("datepicker-rtl");this.viewMode=this.o.startView;this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(n,t){return parseInt(t)+1});this._allow_update=!1;this.setStartDate(this._o.startDate);this.setEndDate(this._o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.fillDow();this.fillMonths();this._allow_update=!0;this.update();this.showMode();this.isInline&&this.show()},h,a,o,v,r,i;f.prototype={constructor:f,_process_options:function(t){var u,e,h,f,s;this._o=n.extend({},this._o,t);u=this.o=n.extend({},this._o);e=u.language;r[e]||(e=e.split("-")[0],r[e]||(e=o.language));u.language=e;switch(u.startView){case 2:case"decade":u.startView=2;break;case 1:case"year":u.startView=1;break;default:u.startView=0}switch(u.minViewMode){case 1:case"months":u.minViewMode=1;break;case 2:case"years":u.minViewMode=2;break;default:u.minViewMode=0}if(u.startView=Math.max(u.startView,u.minViewMode),u.multidate!==!0&&(u.multidate=Number(u.multidate)||!1,u.multidate=u.multidate!==!1?Math.max(0,u.multidate):1),u.multidateSeparator=String(u.multidateSeparator),u.weekStart%=7,u.weekEnd=(u.weekStart+6)%7,h=i.parseFormat(u.format),u.startDate!==-Infinity&&(u.startDate=u.startDate?u.startDate instanceof Date?this._local_to_utc(this._zero_time(u.startDate)):i.parseDate(u.startDate,h,u.language):-Infinity),u.endDate!==Infinity&&(u.endDate=u.endDate?u.endDate instanceof Date?this._local_to_utc(this._zero_time(u.endDate)):i.parseDate(u.endDate,h,u.language):Infinity),u.daysOfWeekDisabled=u.daysOfWeekDisabled||[],n.isArray(u.daysOfWeekDisabled)||(u.daysOfWeekDisabled=u.daysOfWeekDisabled.split(/[,\s]*/)),u.daysOfWeekDisabled=n.map(u.daysOfWeekDisabled,function(n){return parseInt(n,10)}),f=String(u.orientation).toLowerCase().split(/\s+/g),s=u.orientation.toLowerCase(),f=n.grep(f,function(n){return/^auto|left|right|top|bottom$/.test(n)}),u.orientation={x:"auto",y:"auto"},s&&s!=="auto")if(f.length===1)switch(f[0]){case"top":case"bottom":u.orientation.y=f[0];break;case"left":case"right":u.orientation.x=f[0]}else s=n.grep(f,function(n){return/^left|right$/.test(n)}),u.orientation.x=s[0]||"auto",s=n.grep(f,function(n){return/^top|bottom$/.test(n)}),u.orientation.y=s[0]||"auto"},_events:[],_secondaryEvents:[],_applyEvents:function(n){for(var i=0,f,r,u;i<n.length;i++){f=n[i][0];n[i].length===2?(r=t,u=n[i][1]):n[i].length===3&&(r=n[i][1],u=n[i][2]);f.on(u,r)}},_unapplyEvents:function(n){for(var i=0,f,r,u;i<n.length;i++)f=n[i][0],n[i].length===2?(u=t,r=n[i][1]):n[i].length===3&&(u=n[i][1],r=n[i][2]),f.off(r,u)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:n.proxy(this.show,this),keyup:n.proxy(function(t){n.inArray(t.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:n.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:n.proxy(this.show,this),keyup:n.proxy(function(t){n.inArray(t.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:n.proxy(this.keydown,this)}],[this.component,{click:n.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:n.proxy(this.show,this)}]];this._events.push([this.element,"*",{blur:n.proxy(function(n){this._focused_from=n.target},this)}],[this.element,{blur:n.proxy(function(n){this._focused_from=n.target},this)}]);this._secondaryEvents=[[this.picker,{click:n.proxy(this.click,this)}],[n(window),{resize:n.proxy(this.place,this)}],[n(document),{"mousedown touchstart":n.proxy(function(n){this.element.is(n.target)||this.element.find(n.target).length||this.picker.is(n.target)||this.picker.find(n.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,r){var u=r||this.dates.get(-1),f=this._utc_to_local(u);this.element.trigger({type:t,date:f,dates:n.map(this.dates,this._utc_to_local),format:n.proxy(function(n,t){arguments.length===0?(n=this.dates.length-1,t=this.o.format):typeof n=="string"&&(t=n,n=this.dates.length-1);t=t||this.o.format;var r=this.dates.get(n);return i.formatDate(r,t,this.o.language)},this)})},show:function(){this.isInline||this.picker.appendTo("body");this.picker.show();this.place();this._attachSecondaryEvents();this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;this.isInput||delete this.element.data().date},_utc_to_local:function(n){return n&&new Date(n.getTime()+n.getTimezoneOffset()*6e4)},_local_to_utc:function(n){return n&&new Date(n.getTime()-n.getTimezoneOffset()*6e4)},_zero_time:function(n){return n&&new Date(n.getFullYear(),n.getMonth(),n.getDate())},_zero_utc_time:function(n){return n&&new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()))},getDates:function(){return n.map(this.dates,this._utc_to_local)},getUTCDates:function(){return n.map(this.dates,function(n){return new Date(n)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var t=n.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,t);this._trigger("changeDate");this.setValue()},setUTCDates:function(){var t=n.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,n.map(t,this._utc_to_local));this._trigger("changeDate");this.setValue()},setDate:c("setDates"),setUTCDate:c("setUTCDates"),setValue:function(){var n=this.getFormattedDate();this.isInput?this.element.val(n).change():this.component&&this.element.find("input").val(n).change()},getFormattedDate:function(r){r===t&&(r=this.o.format);var u=this.o.language;return n.map(this.dates,function(n){return i.formatDate(n,r,u)}).join(this.o.multidateSeparator)},setStartDate:function(n){this._process_options({startDate:n});this.update();this.updateNavArrows()},setEndDate:function(n){this._process_options({endDate:n});this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(n){this._process_options({daysOfWeekDisabled:n});this.update();this.updateNavArrows()},place:function(){var i,v,o;if(!this.isInline){var u=this.picker.outerWidth(),f=this.picker.outerHeight(),h=10,c=s.width(),y=s.height(),l=s.scrollTop(),p=parseInt(this.element.parents().filter(function(){return n(this).css("z-index")!=="auto"}).first().css("z-index"))+10,t=this.component?this.component.parent().offset():this.element.offset(),a=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),w=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),r=t.left,e=t.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left");this.o.orientation.x!=="auto"?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),this.o.orientation.x==="right"&&(r-=u-w)):(this.picker.addClass("datepicker-orient-left"),t.left<0?r-=t.left-h:t.left+u>c&&(r=c-u-h));i=this.o.orientation.y;i==="auto"&&(v=-l+t.top-f,o=l+y-(t.top+a+f),i=Math.max(v,o)===o?"top":"bottom");this.picker.addClass("datepicker-orient-"+i);i==="top"?e+=a:e-=f+parseInt(this.picker.css("padding-top"));this.picker.css({top:e,left:r,zIndex:p})}},_allow_update:!0,update:function(){if(this._allow_update){var r=this.dates.copy(),t=[],u=!1;arguments.length?(n.each(arguments,n.proxy(function(n,i){i instanceof Date&&(i=this._local_to_utc(i));t.push(i)},this)),u=!0):(t=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),t=t&&this.o.multidate?t.split(this.o.multidateSeparator):[t],delete this.element.data().date);t=n.map(t,n.proxy(function(n){return i.parseDate(n,this.o.format,this.o.language)},this));t=n.grep(t,n.proxy(function(n){return n<this.o.startDate||n>this.o.endDate||!n},this),!0);this.dates.replace(t);this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate));u?this.setValue():t.length&&String(r)!==String(this.dates)&&this._trigger("changeDate");!this.dates.length&&r.length&&this._trigger("clearDate");this.fill()}},fillDow:function(){var i=this.o.weekStart,n="<tr>",t;for(this.o.calendarWeeks&&(t='<th class="cw">&nbsp;<\/th>',n+=t,this.picker.find(".datepicker-days thead tr:first-child").prepend(t));i<this.o.weekStart+7;)n+='<th class="dow">'+r[this.o.language].daysMin[i++%7]+"<\/th>";n+="<\/tr>";this.picker.find(".datepicker-days thead").append(n)},fillMonths:function(){for(var n="",t=0;t<12;)n+='<span class="month">'+r[this.o.language].monthsShort[t++]+"<\/span>";this.picker.find(".datepicker-months td").html(n)},setRange:function(t){t&&t.length?this.range=n.map(t,function(n){return n.valueOf()}):delete this.range;this.fill()},getClassNames:function(t){var i=[],r=this.viewDate.getUTCFullYear(),f=this.viewDate.getUTCMonth(),u=new Date;return t.getUTCFullYear()<r||t.getUTCFullYear()===r&&t.getUTCMonth()<f?i.push("old"):(t.getUTCFullYear()>r||t.getUTCFullYear()===r&&t.getUTCMonth()>f)&&i.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&i.push("focused"),this.o.todayHighlight&&t.getUTCFullYear()===u.getFullYear()&&t.getUTCMonth()===u.getMonth()&&t.getUTCDate()===u.getDate()&&i.push("today"),this.dates.contains(t)!==-1&&i.push("active"),(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||n.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)!==-1)&&i.push("disabled"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&i.push("range"),n.inArray(t.valueOf(),this.range)!==-1&&i.push("selected")),i},fill:function(){var d=new Date(this.viewDate),f=d.getUTCFullYear(),g=d.getUTCMonth(),y=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,ut=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,p=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,ft=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,et=r[this.o.language].today||r.en.today||"",ot=r[this.o.language].clear||r.en.clear||"",w,e,b,c,s,h,o,a,it,rt,l,v;for(this.picker.find(".datepicker-days thead th.datepicker-switch").text(r[this.o.language].months[g]+" "+f),this.picker.find("tfoot th.today").text(et).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(ot).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths(),e=u(f,g-1,28),b=i.getDaysInMonth(e.getUTCFullYear(),e.getUTCMonth()),e.setUTCDate(b),e.setUTCDate(b-(e.getUTCDay()-this.o.weekStart+7)%7),c=new Date(e),c.setUTCDate(c.getUTCDate()+42),c=c.valueOf(),s=[];e.valueOf()<c;){if(e.getUTCDay()===this.o.weekStart&&(s.push("<tr>"),this.o.calendarWeeks)){var nt=new Date(+e+(this.o.weekStart-e.getUTCDay()-7)%7*864e5),tt=new Date(Number(nt)+(11-nt.getUTCDay())%7*864e5),k=new Date(Number(k=u(tt.getUTCFullYear(),0,1))+(11-k.getUTCDay())%7*864e5),st=(tt-k)/6048e5+1;s.push('<td class="cw">'+st+"<\/td>")}h=this.getClassNames(e);h.push("day");this.o.beforeShowDay!==n.noop&&(o=this.o.beforeShowDay(this._utc_to_local(e)),o===t?o={}:typeof o=="boolean"?o={enabled:o}:typeof o=="string"&&(o={classes:o}),o.enabled===!1&&h.push("disabled"),o.classes&&(h=h.concat(o.classes.split(/\s+/))),o.tooltip&&(w=o.tooltip));h=n.unique(h);s.push('<td class="'+h.join(" ")+'"'+(w?' title="'+w+'"':"")+">"+e.getUTCDate()+"<\/td>");e.getUTCDay()===this.o.weekEnd&&s.push("<\/tr>");e.setUTCDate(e.getUTCDate()+1)}for(this.picker.find(".datepicker-days tbody").empty().append(s.join("")),a=this.picker.find(".datepicker-months").find("th:eq(1)").text(f).end().find("span").removeClass("active"),n.each(this.dates,function(n,t){t.getUTCFullYear()===f&&a.eq(t.getUTCMonth()).addClass("active")}),(f<y||f>p)&&a.addClass("disabled"),f===y&&a.slice(0,ut).addClass("disabled"),f===p&&a.slice(ft+1).addClass("disabled"),s="",f=parseInt(f/10,10)*10,it=this.picker.find(".datepicker-years").find("th:eq(1)").text(f+"-"+(f+9)).end().find("td"),f-=1,rt=n.map(this.dates,function(n){return n.getUTCFullYear()}),v=-1;v<11;v++)l=["year"],v===-1?l.push("old"):v===10&&l.push("new"),n.inArray(f,rt)!==-1&&l.push("active"),(f<y||f>p)&&l.push("disabled"),s+='<span class="'+l.join(" ")+'">'+f+"<\/span>",f+=1;it.html(s)},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),n=t.getUTCFullYear(),i=t.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-Infinity&&n<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});this.o.endDate!==Infinity&&n>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-Infinity&&n<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});this.o.endDate!==Infinity&&n>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(t){var r,e,f,o,c,s,l,h;if(t.preventDefault(),r=n(t.target).closest("span, td, th"),r.length===1)switch(r[0].nodeName.toLowerCase()){case"th":switch(r[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":c=i.modes[this.viewMode].navStep*(r[0].className==="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,c);this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,c);this.viewMode===1&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":s=new Date;s=u(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0);this.showMode(-2);l=this.o.todayBtn==="linked"?null:"view";this._setDate(s,l);break;case"clear":this.isInput?h=this.element:this.component&&(h=this.element.find("input"));h&&h.val("").change();this.update();this._trigger("changeDate");this.o.autoclose&&this.hide()}break;case"span":r.is(".disabled")||(this.viewDate.setUTCDate(1),r.is(".month")?(o=1,f=r.parent().find("span").index(r),e=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(f),this._trigger("changeMonth",this.viewDate),this.o.minViewMode===1&&this._setDate(u(e,f,o))):(o=1,f=0,e=parseInt(r.text(),10)||0,this.viewDate.setUTCFullYear(e),this._trigger("changeYear",this.viewDate),this.o.minViewMode===2&&this._setDate(u(e,f,o))),this.showMode(-1),this.fill());break;case"td":r.is(".day")&&!r.is(".disabled")&&(o=parseInt(r.text(),10)||1,e=this.viewDate.getUTCFullYear(),f=this.viewDate.getUTCMonth(),r.is(".old")?f===0?(f=11,e-=1):f-=1:r.is(".new")&&(f===11?(f=0,e+=1):f+=1),this._setDate(u(e,f,o)))}this.picker.is(":visible")&&this._focused_from&&n(this._focused_from).focus();delete this._focused_from},_toggle_multidate:function(n){var t=this.dates.contains(n);if(n?t!==-1?this.dates.remove(t):this.dates.push(n):this.dates.clear(),typeof this.o.multidate=="number")while(this.dates.length>this.o.multidate)this.dates.remove(0)},_setDate:function(n,t){t&&t!=="date"||this._toggle_multidate(n&&new Date(n));t&&t!=="view"||(this.viewDate=n&&new Date(n));this.fill();this.setValue();this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input"));i&&i.change();this.o.autoclose&&(!t||t==="date")&&this.hide()},moveMonth:function(n,i){var e;if(!n)return t;if(!i)return n;var r=new Date(n.valueOf()),o=r.getUTCDate(),s=r.getUTCMonth(),h=Math.abs(i),u,f;if(i=i>0?1:-1,h===1)f=i===-1?function(){return r.getUTCMonth()===s}:function(){return r.getUTCMonth()!==u},u=s+i,r.setUTCMonth(u),(u<0||u>11)&&(u=(u+12)%12);else{for(e=0;e<h;e++)r=this.moveMonth(r,i);u=r.getUTCMonth();r.setUTCDate(o);f=function(){return u!==r.getUTCMonth()}}while(f())r.setUTCDate(--o),r.setUTCMonth(u);return r},moveYear:function(n,t){return this.moveMonth(n,t*12)},dateWithinRange:function(n){return n>=this.o.startDate&&n<=this.o.endDate},keydown:function(n){var o,t,i,u,r,f;if(this.picker.is(":not(:visible)")){n.keyCode===27&&this.show();return}o=!1;r=this.focusDate||this.viewDate;switch(n.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide();n.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;t=n.keyCode===37?-1:1;n.ctrlKey?(i=this.moveYear(this.dates.get(-1)||e(),t),u=this.moveYear(r,t),this._trigger("changeYear",this.viewDate)):n.shiftKey?(i=this.moveMonth(this.dates.get(-1)||e(),t),u=this.moveMonth(r,t),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.dates.get(-1)||e()),i.setUTCDate(i.getUTCDate()+t),u=new Date(r),u.setUTCDate(r.getUTCDate()+t));this.dateWithinRange(i)&&(this.focusDate=this.viewDate=u,this.setValue(),this.fill(),n.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;t=n.keyCode===38?-1:1;n.ctrlKey?(i=this.moveYear(this.dates.get(-1)||e(),t),u=this.moveYear(r,t),this._trigger("changeYear",this.viewDate)):n.shiftKey?(i=this.moveMonth(this.dates.get(-1)||e(),t),u=this.moveMonth(r,t),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.dates.get(-1)||e()),i.setUTCDate(i.getUTCDate()+t*7),u=new Date(r),u.setUTCDate(r.getUTCDate()+t*7));this.dateWithinRange(i)&&(this.focusDate=this.viewDate=u,this.setValue(),this.fill(),n.preventDefault());break;case 13:r=this.focusDate||this.dates.get(-1)||this.viewDate;this._toggle_multidate(r);o=!0;this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();this.picker.is(":visible")&&(n.preventDefault(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill();this.hide()}o&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.isInput?f=this.element:this.component&&(f=this.element.find("input")),f&&f.change())},showMode:function(n){n&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+n)));this.picker.find(">div").hide().filter(".datepicker-"+i.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()}};h=function(t,i){this.element=n(t);this.inputs=n.map(i.inputs,function(n){return n.jquery?n[0]:n});delete i.inputs;n(this.inputs).datepicker(i).bind("changeDate",n.proxy(this.dateUpdated,this));this.pickers=n.map(this.inputs,function(t){return n(t).data("datepicker")});this.updateDates()};h.prototype={updateDates:function(){this.dates=n.map(this.pickers,function(n){return n.getUTCDate()});this.updateRanges()},updateRanges:function(){var t=n.map(this.dates,function(n){return n.valueOf()});n.each(this.pickers,function(n,i){i.setRange(t)})},dateUpdated:function(t){if(!this.updating){this.updating=!0;var u=n(t.target).data("datepicker"),r=u.getUTCDate(),i=n.inArray(t.target,this.inputs),f=this.inputs.length;if(i!==-1){if(n.each(this.pickers,function(n,t){t.getUTCDate()||t.setUTCDate(r)}),r<this.dates[i])while(i>=0&&r<this.dates[i])this.pickers[i--].setUTCDate(r);else if(r>this.dates[i])while(i<f&&r>this.dates[i])this.pickers[i++].setUTCDate(r);this.updateDates();delete this.updating}}},remove:function(){n.map(this.pickers,function(n){n.remove()});delete this.element.data().datepicker}};a=n.fn.datepicker;n.fn.datepicker=function(i){var u=Array.apply(null,arguments),r;return u.shift(),this.each(function(){var s=n(this),e=s.data("datepicker"),l=typeof i=="object"&&i,v;if(!e){var a=y(this,"date"),w=n.extend({},o,a,l),b=p(w.language),c=n.extend({},o,b,a,l);s.is(".input-daterange")||c.inputs?(v={inputs:c.inputs||s.find("input").toArray()},s.data("datepicker",e=new h(this,n.extend(c,v)))):s.data("datepicker",e=new f(this,c))}if(typeof i=="string"&&typeof e[i]=="function"&&(r=e[i].apply(e,u),r!==t))return!1}),r!==t?r:this};o=n.fn.datepicker.defaults={autoclose:!1,beforeShowDay:n.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:Infinity,forceParse:!0,format:"yyyy-mm-dd",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0};v=n.fn.datepicker.locale_opts=["format","rtl","weekStart"];n.fn.datepicker.Constructor=f;r=n.fn.datepicker.dates={en:{days:["æææ¥","ææä¸","ææäº","ææä¸","ææå","ææäº","ææå­","æææ¥"],daysShort:["æ¥","ä¸","äº","ä¸","å","äº","å­","æ¥"],daysMin:["æ¥","ä¸","äº","ä¸","å","äº","å­","æ¥"],months:["ä¸æ","äºæ","ä¸æ","åæ","äºæ","å­æ","ä¸æ","å«æ","ä¹æ","åæ","åä¸æ","åäºæ"],monthsShort:["1","2","3","4","5","6","7","8","9","10","11","12"],today:"ä»å¤©",clear:"æ¸ç©º"}};i={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(n){return n%4==0&&n%100!=0||n%400==0},getDaysInMonth:function(n,t){return[31,i.isLeapYear(n)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(n){var t=n.replace(this.validParts,'\0').split('\0'),i=n.match(this.validParts);if(!t||!t.length||!i||i.length===0)throw new Error("Invalid date format.");return{separators:t,parts:i}},parseDate:function(e,o,s){function tt(){var n=this.slice(0,c[h].length),t=c[h].slice(0,n.length);return n===t}var nt,c,v,y,h,a,it,d,w;if(!e)return t;if(e instanceof Date)return e;if(typeof o=="string"&&(o=i.parseFormat(o)),nt=/([\-+]\d+)([dmwy])/,c=e.match(/([\-+]\d+)([dmwy])/g),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(e)){for(e=new Date,h=0;h<c.length;h++){v=nt.exec(c[h]);y=parseInt(v[1]);switch(v[2]){case"d":e.setUTCDate(e.getUTCDate()+y);break;case"m":e=f.prototype.moveMonth.call(f.prototype,e,y);break;case"w":e.setUTCDate(e.getUTCDate()+y*7);break;case"y":e=f.prototype.moveYear.call(f.prototype,e,y)}}return u(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),0,0,0)}c=e&&e.match(this.nonpunctuation)||[];e=new Date;var b={},g=["yyyy","yy","M","MM","m","mm","d","dd"],l={yyyy:function(n,t){return n.setUTCFullYear(t)},yy:function(n,t){return n.setUTCFullYear(2e3+t)},m:function(n,t){if(isNaN(n))return n;for(t-=1;t<0;)t+=12;for(t%=12,n.setUTCMonth(t);n.getUTCMonth()!==t;)n.setUTCDate(n.getUTCDate()-1);return n},d:function(n,t){return n.setUTCDate(t)}},p,k;if(l.M=l.MM=l.mm=l.m,l.dd=l.d,e=u(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0),a=o.parts.slice(),c.length!==a.length&&(a=n(a).filter(function(t,i){return n.inArray(i,g)!==-1}).toArray()),c.length===a.length){for(h=0,it=a.length;h<it;h++){if(p=parseInt(c[h],10),v=a[h],isNaN(p))switch(v){case"MM":k=n(r[s].months).filter(tt);p=n.inArray(k[0],r[s].months)+1;break;case"M":k=n(r[s].monthsShort).filter(tt);p=n.inArray(k[0],r[s].monthsShort)+1}b[v]=p}for(h=0;h<g.length;h++)w=g[h],w in b&&!isNaN(b[w])&&(d=new Date(e),l[w](d,b[w]),isNaN(d)||(e=d))}return e},formatDate:function(t,u,f){var e,s,o,h;if(!t)return"";for(typeof u=="string"&&(u=i.parseFormat(u)),e={d:t.getUTCDate(),D:r[f].daysShort[t.getUTCDay()],DD:r[f].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:r[f].monthsShort[t.getUTCMonth()],MM:r[f].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()},e.dd=(e.d<10?"0":"")+e.d,e.mm=(e.m<10?"0":"")+e.m,t=[],s=n.extend([],u.separators),o=0,h=u.parts.length;o<=h;o++)s.length&&t.push(s.shift()),t.push(e[u.parts[o]]);return t.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;<\/th><th colspan="5" class="datepicker-switch"><\/th><th class="next">&raquo;<\/th><\/tr><\/thead>',contTemplate:'<tbody><tr><td colspan="7"><\/td><\/tr><\/tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"><\/th><\/tr><tr><th colspan="7" class="clear"><\/th><\/tr><\/tfoot>'};i.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+i.headTemplate+"<tbody><\/tbody>"+i.footTemplate+'<\/table><\/div><div class="datepicker-months"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+'<\/table><\/div><div class="datepicker-years"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+"<\/table><\/div><\/div>";n.fn.datepicker.DPGlobal=i;n.fn.datepicker.noConflict=function(){return n.fn.datepicker=a,this};n(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var i=n(this);i.data("datepicker")||(t.preventDefault(),i.datepicker("show"))});n(function(){n('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery),function(){Date.prototype.format=function(n){var i={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},t;/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(t in i)i.hasOwnProperty(t)&&new RegExp("("+t+")").test(n)&&(n=n.replace(RegExp.$1,RegExp.$1.length===1?i[t]:("00"+i[t]).substr((""+i[t]).length)));return n};String.prototype.getDate=function(){var n=/\d{13}/.exec(this),t=new Date(parseInt(n));return t.format("yyyy-MM-dd HH:mm:ss")}}();var XPage={DelData:function(n){var t=DUWENINKGrid.GetDataTableDeleteData();t.Len>0&&t.Data.length>0?parent.layer.confirm("ç¡®è®¤è¦å é¤è¿"+t.Len+"æ¡æ°æ®ï¼",{icon:3,title:"æç¤º"},function(i){parent.layer.load(2,{shade:.3});var r=$("#btnDel");r.button("loading");$.ajax({url:n,type:"POST",dataType:"json",data:JSON.stringify(t.Data),contentType:"application/json, charset=utf-8",success:function(n){r.button("reset");parent.layer.close(i);parent.layer.closeAll();n.flag?(parent.layer.msg("å é¤æå"),$("#table_list").trigger("reloadGrid")):parent.layer.msg("å é¤å¤±è´¥ï¼"+n.msg)}})}):parent.layer.msg("è¯·éæ©è¦å é¤çæ°æ®ï¼")},GoTo:function(n,t){$(n).button("loading");window.location.href=t},Search:function(n){var t=$("#table_list").jqGrid("getGridParam","postData");$.extend(t,n);$("#table_list").setGridParam({search:!0}).trigger("reloadGrid",[{page:1}])},DoPost:function(n,t,i,r,u){var f=n!=null,e;f&&$(n).button("loading");e=$.ajax({url:t,type:"POST",data:i,dataType:"JSON",success:function(t){f&&$(n).button("reset");t.flag?r==null||typeof r=="undefined"?parent.layer.msg("æä½æå"):r.call(this,t):u==null||typeof u=="undefined"?parent.layer.msg("æä½å¤±è´¥ï¼"+t.msg):u.call(this,t)},complete:function(t,i){f&&$(n).button("reset");i==="timeout"&&(e.abort(),parent.layer.msg("è¯·æ±è¶æ¶ï¼è¯·å·æ°é¡µé¢éè¯"));i==="error"&&(e.abort(),parent.layer.msg("è¯·æ±å¤±è´¥ï¼è¯·å·æ°é¡µé¢éè¯"))}})}};
/*!
 * Cropper v0.7.6-beta
 * https://github.com/fengyuanchen/cropper
 *
 * Copyright 2014 Fengyuan Chen
 * Released under the MIT license
 */
!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):n("object"==typeof exports?require("jquery"):jQuery)}(function(n){"use strict";var nt=n(window),wt=n(document),p=window.location,i=!0,t=!1,f=null,tt=NaN,w=1/0,it="undefined",v="directive",l=".cropper",bt=/^(e|n|w|s|ne|nw|sw|se|all|crop|move|zoom)$/,kt=/^(x|y|width|height)$/,dt=/^(naturalWidth|naturalHeight|width|height|aspectRatio|ratio|rotate)$/,y="cropper-modal",h="cropper-hidden",rt="cropper-invisible",gt="cropper-move",ut="cropper-crop",ft="cropper-disabled",et="mousedown touchstart",ot="mousemove touchmove",st="mouseup mouseleave touchend touchleave touchcancel",ht="wheel mousewheel DOMMouseScroll",ct="resize"+l,lt="dblclick",at="build"+l,vt="built"+l,b="dragstart"+l,k="dragmove"+l,d="dragend"+l,a=function(n){return"number"==typeof n},u=function(i,r){this.element=i;this.$element=n(i);this.defaults=n.extend({},u.DEFAULTS,n.isPlainObject(r)?r:{});this.$original=f;this.ready=t;this.built=t;this.cropped=t;this.rotated=t;this.disabled=t;this.replaced=t;this.init()},r=Math.round,g=Math.sqrt,o=Math.min,s=Math.max,e=Math.abs,yt=Math.sin,pt=Math.cos,c=parseFloat;u.prototype={constructor:u,support:{canvas:n.isFunction(n("<canvas>")[0].getContext)},init:function(){var t=this.defaults;n.each(t,function(n,i){switch(n){case"aspectRatio":t[n]=e(c(i))||tt;break;case"autoCropArea":t[n]=e(c(i))||.8;break;case"minWidth":case"minHeight":t[n]=e(c(i))||0;break;case"maxWidth":case"maxHeight":t[n]=e(c(i))||w}});this.image={rotate:0};this.load()},load:function(){var u,t,e=this,f=this.$element,s=this.element,r=this.image,o="";f.is("img")?t=f.prop("src"):f.is("canvas")&&this.support.canvas&&(t=s.toDataURL());t&&(this.replaced&&(r.rotate=0),this.defaults.checkImageOrigin&&(f.prop("crossOrigin")||this.isCrossOriginURL(t))&&(o=" crossOrigin"),this.$clone=u=n("<img"+o+' src="'+t+'">'),u.one("load",function(){r.naturalWidth=this.naturalWidth||u.width();r.naturalHeight=this.naturalHeight||u.height();r.aspectRatio=r.naturalWidth/r.naturalHeight;e.url=t;e.ready=i;e.build()}),u.addClass(rt).prependTo("body"))},isCrossOriginURL:function(n){var r=n.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);return!r||r[1]===p.protocol&&r[2]===p.hostname&&r[3]===p.port?t:i},build:function(){var e,r,f=this.$element,t=this.defaults;this.ready&&(this.built&&this.unbuild(),f.one(at,t.build),e=n.Event(at),f.trigger(e),e.isDefaultPrevented()||(this.$cropper=r=n(u.TEMPLATE),f.addClass(h),this.$clone.removeClass(rt).prependTo(r),this.rotated||(this.$original=this.$clone.clone(),this.$original.addClass(h).prependTo(this.$cropper),this.originalImage=n.extend({},this.image)),this.$container=f.parent(),this.$container.append(r),this.$canvas=r.find(".cropper-canvas"),this.$dragger=r.find(".cropper-dragger"),this.$viewer=r.find(".cropper-viewer"),t.autoCrop?this.cropped=i:this.$dragger.addClass(h),t.dragCrop&&this.setDragMode("crop"),t.modal&&this.$canvas.addClass(y),!t.dashed&&this.$dragger.find(".cropper-dashed").addClass(h),!t.movable&&this.$dragger.find(".cropper-face").data(v,"move"),!t.resizable&&this.$dragger.find(".cropper-line, .cropper-point").addClass(h),this.$scope=t.multiple?this.$cropper:wt,this.addListeners(),this.initPreview(),this.built=i,this.update(),f.one(vt,t.built),f.trigger(vt)))},unbuild:function(){this.built&&(this.built=t,this.removeListeners(),this.$preview.empty(),this.$preview=f,this.$dragger=f,this.$canvas=f,this.$container=f,this.$cropper.remove(),this.$cropper=f)},update:function(n){this.initContainer();this.initCropper();this.initImage();this.initDragger();n?(this.setData(n,i),this.setDragMode("crop")):this.setData(this.defaults.data)},resize:function(){clearTimeout(this.resizing);this.resizing=setTimeout(n.proxy(this.update,this,this.getData()),200)},preview:function(){var t=this.image,i=this.dragger,u=t.width,f=t.height,e=i.left-t.left,o=i.top-t.top;this.$viewer.find("img").css({width:r(u),height:r(f),marginLeft:-r(e),marginTop:-r(o)});this.$preview.each(function(){var s=n(this),t=s.width()/i.width;s.find("img").css({width:r(u*t),height:r(f*t),marginLeft:-r(e*t),marginTop:-r(o*t)})})},addListeners:function(){var t=this.defaults;this.$element.on(b,t.dragstart).on(k,t.dragmove).on(d,t.dragend);this.$cropper.on(et,this._dragstart=n.proxy(this.dragstart,this)).on(lt,this._dblclick=n.proxy(this.dblclick,this));t.zoomable&&this.$cropper.on(ht,this._wheel=n.proxy(this.wheel,this));this.$scope.on(ot,this._dragmove=n.proxy(this.dragmove,this)).on(st,this._dragend=n.proxy(this.dragend,this));nt.on(ct,this._resize=n.proxy(this.resize,this))},removeListeners:function(){var n=this.defaults;this.$element.off(b,n.dragstart).off(k,n.dragmove).off(d,n.dragend);this.$cropper.off(et,this._dragstart).off(lt,this._dblclick);n.zoomable&&this.$cropper.off(ht,this._wheel);this.$scope.off(ot,this._dragmove).off(st,this._dragend);nt.off(ct,this._resize)},initPreview:function(){var t='<img src="'+this.url+'">';this.$preview=n(this.defaults.preview);this.$viewer.html(t);this.$preview.html(t).find("img").css("cssText","min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;")},initContainer:function(){var n=this.$container;this.container={width:s(n.width(),300),height:s(n.height(),150)}},initCropper:function(){var n,t=this.container,i=this.image;i.naturalWidth*t.height/i.naturalHeight-t.width>=0?(n={width:t.width,height:t.width/i.aspectRatio,left:0},n.top=(t.height-n.height)/2):(n={width:t.height*i.aspectRatio,height:t.height,top:0},n.left=(t.width-n.width)/2);this.$cropper.css({width:r(n.width),height:r(n.height),left:r(n.left),top:r(n.top)});this.cropper=n},initImage:function(){var i=this.image,r=this.cropper,u={_width:r.width,_height:r.height,width:r.width,height:r.height,left:0,top:0,ratio:r.width/i.naturalWidth};this.defaultImage=n.extend({},i,u);i._width!==r.width||i._height!==r.height?n.extend(i,u):(i=n.extend({},u,i),this.replaced&&(this.replaced=t,i.ratio=u.ratio));this.image=i;this.renderImage()},renderImage:function(n){var t=this.image;"zoom"===n&&(t.left-=(t.width-t.oldWidth)/2,t.top-=(t.height-t.oldHeight)/2);t.left=o(s(t.left,t._width-t.width),0);t.top=o(s(t.top,t._height-t.height),0);this.$clone.css({width:r(t.width),height:r(t.height),marginLeft:r(t.left),marginTop:r(t.top)});n&&(this.defaults.done(this.getData()),this.preview())},initDragger:function(){var t,i=this.defaults,r=this.cropper,u=i.aspectRatio||this.image.aspectRatio,f=this.image.ratio;t=r.height*u-r.width>=0?{height:r.width/u,width:r.width,left:0,top:(r.height-r.width/u)/2,maxWidth:r.width,maxHeight:r.width/u}:{height:r.height,width:r.height*u,left:(r.width-r.height*u)/2,top:0,maxWidth:r.height*u,maxHeight:r.height};t.minWidth=0;t.minHeight=0;i.aspectRatio?(isFinite(i.maxWidth)?(t.maxWidth=o(t.maxWidth,i.maxWidth*f),t.maxHeight=t.maxWidth/u):isFinite(i.maxHeight)&&(t.maxHeight=o(t.maxHeight,i.maxHeight*f),t.maxWidth=t.maxHeight*u),i.minWidth>0?(t.minWidth=s(0,i.minWidth*f),t.minHeight=t.minWidth/u):i.minHeight>0&&(t.minHeight=s(0,i.minHeight*f),t.minWidth=t.minHeight*u)):(t.maxWidth=o(t.maxWidth,i.maxWidth*f),t.maxHeight=o(t.maxHeight,i.maxHeight*f),t.minWidth=s(0,i.minWidth*f),t.minHeight=s(0,i.minHeight*f));t.minWidth=o(t.maxWidth,t.minWidth);t.minHeight=o(t.maxHeight,t.minHeight);t.height*=i.autoCropArea;t.width*=i.autoCropArea;t.left=(r.width-t.width)/2;t.top=(r.height-t.height)/2;t.oldLeft=t.left;t.oldTop=t.top;this.defaultDragger=t;this.dragger=n.extend({},t)},renderDragger:function(){var n=this.dragger,t=this.cropper;n.width>n.maxWidth?(n.width=n.maxWidth,n.left=n.oldLeft):n.width<n.minWidth&&(n.width=n.minWidth,n.left=n.oldLeft);n.height>n.maxHeight?(n.height=n.maxHeight,n.top=n.oldTop):n.height<n.minHeight&&(n.height=n.minHeight,n.top=n.oldTop);n.left=o(s(n.left,0),t.width-n.width);n.top=o(s(n.top,0),t.height-n.height);n.oldLeft=n.left;n.oldTop=n.top;this.dragger=n;this.disabled||this.defaults.done(this.getData());this.$dragger.css({width:r(n.width),height:r(n.height),left:r(n.left),top:r(n.top)});this.preview()},reset:function(t){this.cropped&&(t&&(this.defaults.data={}),this.image=n.extend({},this.defaultImage),this.renderImage(),this.dragger=n.extend({},this.defaultDragger),this.setData(this.defaults.data))},clear:function(){this.cropped&&(this.cropped=t,this.setData({x:0,y:0,width:0,height:0}),this.$canvas.removeClass(y),this.$dragger.addClass(h))},destroy:function(){var n=this.$element;this.ready&&(this.unbuild(),n.removeClass(h).removeData("cropper"),this.rotated&&n.attr("src",this.$original.attr("src")))},replace:function(r,u){var o,s=this,e=this.$element,f=this.element;r&&r!==this.url&&r!==e.attr("src")&&(u||(this.rotated=t,this.replaced=i),e.is("img")?(e.attr("src",r),this.load()):e.is("canvas")&&this.support.canvas&&(o=f.getContext("2d"),n('<img src="'+r+'">').one("load",function(){f.width=this.width;f.height=this.height;o.clearRect(0,0,f.width,f.height);o.drawImage(this,0,0);s.load()})))},setData:function(t,i){var o=this.cropper,r=this.dragger,u=this.image,e=this.defaults.aspectRatio;this.built&&typeof t!==it&&((t===f||n.isEmptyObject(t))&&(r=n.extend({},this.defaultDragger)),n.isPlainObject(t)&&!n.isEmptyObject(t)&&(i||(this.defaults.data=t),t=this.transformData(t),a(t.x)&&t.x<=o.width-u.left&&(r.left=t.x+u.left),a(t.y)&&t.y<=o.height-u.top&&(r.top=t.y+u.top),e?a(t.width)&&t.width<=r.maxWidth&&t.width>=r.minWidth?(r.width=t.width,r.height=r.width/e):a(t.height)&&t.height<=r.maxHeight&&t.height>=r.minHeight&&(r.height=t.height,r.width=r.height*e):(a(t.width)&&t.width<=r.maxWidth&&t.width>=r.minWidth&&(r.width=t.width),a(t.height)&&t.height<=r.maxHeight&&t.height>=r.minHeight&&(r.height=t.height))),this.dragger=r,this.renderDragger())},getData:function(n){var t=this.dragger,u=this.image,r={};return this.built&&(r={x:t.left-u.left,y:t.top-u.top,width:t.width,height:t.height},r=this.transformData(r,i,n)),r},transformData:function(t,i,u){var f=this.image.ratio,e={};return n.each(t,function(n,t){t=c(t);kt.test(n)&&!isNaN(t)&&(e[n]=i?u?r(t/f):t/f:t*f)}),e},setAspectRatio:function(n){var t="auto"===n;n=c(n);(t||!isNaN(n)&&n>0)&&(this.defaults.aspectRatio=t?tt:n,this.built&&(this.initDragger(),this.renderDragger()))},getImageData:function(){var t={};return this.ready&&n.each(this.image,function(n,i){dt.test(n)&&(t[n]=i)}),t},getDataURL:function(t,i,r){var f,e=n("<canvas>")[0],u=this.getData(),o="";return n.isPlainObject(t)||(r=i,i=t,t={}),t=n.extend({width:u.width,height:u.height},t),this.cropped&&this.support.canvas&&(e.width=t.width,e.height=t.height,f=e.getContext("2d"),"image/jpeg"===i&&(f.fillStyle="#fff",f.fillRect(0,0,t.width,t.height)),f.drawImage(this.$clone[0],u.x,u.y,u.width,u.height,0,0,t.width,t.height),o=e.toDataURL(i,r)),o},setDragMode:function(n){var r=this.$canvas,e=this.defaults,u=t,f=t;if(this.built&&!this.disabled){switch(n){case"crop":e.dragCrop&&(u=i,r.data(v,n));break;case"move":f=i;r.data(v,n);break;default:r.removeData(v)}r.toggleClass(ut,u).toggleClass(gt,f)}},enable:function(){this.built&&(this.disabled=t,this.$cropper.removeClass(ft))},disable:function(){this.built&&(this.disabled=i,this.$cropper.addClass(ft))},rotate:function(n){var t=this.image;n=c(n)||0;this.built&&0!==n&&!this.disabled&&this.defaults.rotatable&&this.support.canvas&&(this.rotated=i,n=t.rotate=(t.rotate+n)%360,this.replace(this.getRotatedDataURL(n),!0))},getRotatedDataURL:function(t){var r=n("<canvas>")[0],i=r.getContext("2d"),a=t*Math.PI/180,s=e(t)%180,v=s>90?180-s:s,u=v*Math.PI/180,h=this.originalImage,f=h.naturalWidth,o=h.naturalHeight,c=e(f*pt(u)+o*yt(u)),l=e(f*yt(u)+o*pt(u));return r.width=c,r.height=l,i.save(),i.translate(c/2,l/2),i.rotate(a),i.drawImage(this.$original[0],-f/2,-o/2,f,o),i.restore(),r.toDataURL()},zoom:function(n){var i,u,r,t=this.image;n=c(n);this.built&&n&&!this.disabled&&this.defaults.zoomable&&(i=t.width*(1+n),u=t.height*(1+n),r=i/t._width,r>10||(1>r&&(i=t._width,u=t._height),this.setDragMode(1>=r?"crop":"move"),t.oldWidth=t.width,t.oldHeight=t.height,t.width=i,t.height=u,t.ratio=t.width/t.naturalWidth,this.renderImage("zoom")))},dblclick:function(){this.disabled||this.setDragMode(this.$canvas.hasClass(ut)?"move":"crop")},wheel:function(n){var t,i=n.originalEvent,r=117.25,u=5;this.disabled||(n.preventDefault(),i.deltaY?(t=i.deltaY,t=t%u==0?t/u:t%r==0?t/r:t/166.66665649414063):t=i.wheelDelta?-i.wheelDelta/120:i.detail?i.detail/3:0,this.zoom(t*.1))},dragstart:function(r){var f,o,s,e=r.originalEvent.touches,u=r;if(!this.disabled){if(e){if(s=e.length,s>1){if(!this.defaults.zoomable||2!==s)return;u=e[1];this.startX2=u.pageX;this.startY2=u.pageY;f="zoom"}u=e[0]}if(f=f||n(u.target).data(v),bt.test(f)){if(r.preventDefault(),o=n.Event(b),this.$element.trigger(o),o.isDefaultPrevented())return;this.directive=f;this.cropping=t;this.startX=u.pageX;this.startY=u.pageY;"crop"===f&&(this.cropping=i,this.$canvas.addClass(y))}}},dragmove:function(t){var u,f,r=t.originalEvent.touches,i=t;if(!this.disabled){if(r){if(f=r.length,f>1){if(!this.defaults.zoomable||2!==f)return;i=r[1];this.endX2=i.pageX;this.endY2=i.pageY}i=r[0]}if(this.directive){if(t.preventDefault(),u=n.Event(k),this.$element.trigger(u),u.isDefaultPrevented())return;this.endX=i.pageX;this.endY=i.pageY;this.dragging()}}},dragend:function(i){var r;if(!this.disabled&&this.directive){if(i.preventDefault(),r=n.Event(d),this.$element.trigger(r),r.isDefaultPrevented())return;this.cropping&&(this.cropping=t,this.$canvas.toggleClass(y,this.cropped&&this.defaults.modal));this.directive=""}},dragging:function(){var k,c=this.directive,b=this.image,d=this.cropper,p=d.width,v=d.height,a=this.dragger,r=a.width,u=a.height,s=a.left,f=a.top,w=s+r,y=f+u,l=i,nt=this.defaults,o=nt.aspectRatio,n={x:this.endX-this.startX,y:this.endY-this.startY};switch(o&&(n.X=n.y*o,n.Y=n.x/o),c){case"all":s+=n.x;f+=n.y;break;case"e":if(n.x>=0&&(w>=p||o&&(0>=f||y>=v))){l=t;break}r+=n.x;o&&(u=r/o,f-=n.Y/2);0>r&&(c="w",r=0);break;case"n":if(n.y<=0&&(0>=f||o&&(0>=s||w>=p))){l=t;break}u-=n.y;f+=n.y;o&&(r=u*o,s+=n.X/2);0>u&&(c="s",u=0);break;case"w":if(n.x<=0&&(0>=s||o&&(0>=f||y>=v))){l=t;break}r-=n.x;s+=n.x;o&&(u=r/o,f+=n.Y/2);0>r&&(c="e",r=0);break;case"s":if(n.y>=0&&(y>=v||o&&(0>=s||w>=p))){l=t;break}u+=n.y;o&&(r=u*o,s-=n.X/2);0>u&&(c="n",u=0);break;case"ne":if(o){if(n.y<=0&&(0>=f||w>=p)){l=t;break}u-=n.y;f+=n.y;r=u*o}else n.x>=0?p>w?r+=n.x:n.y<=0&&0>=f&&(l=t):r+=n.x,n.y<=0?f>0&&(u-=n.y,f+=n.y):(u-=n.y,f+=n.y);0>u&&(c="sw",u=0,r=0);break;case"nw":if(o){if(n.y<=0&&(0>=f||0>=s)){l=t;break}u-=n.y;f+=n.y;r=u*o;s+=n.X}else n.x<=0?s>0?(r-=n.x,s+=n.x):n.y<=0&&0>=f&&(l=t):(r-=n.x,s+=n.x),n.y<=0?f>0&&(u-=n.y,f+=n.y):(u-=n.y,f+=n.y);0>u&&(c="se",u=0,r=0);break;case"sw":if(o){if(n.x<=0&&(0>=s||y>=v)){l=t;break}r-=n.x;s+=n.x;u=r/o}else n.x<=0?s>0?(r-=n.x,s+=n.x):n.y>=0&&y>=v&&(l=t):(r-=n.x,s+=n.x),n.y>=0?v>y&&(u+=n.y):u+=n.y;0>r&&(c="ne",u=0,r=0);break;case"se":if(o){if(n.x>=0&&(w>=p||y>=v)){l=t;break}r+=n.x;u=r/o}else n.x>=0?p>w?r+=n.x:n.y>=0&&y>=v&&(l=t):r+=n.x,n.y>=0?v>y&&(u+=n.y):u+=n.y;0>r&&(c="nw",u=0,r=0);break;case"move":b.left+=n.x;b.top+=n.y;this.renderImage("move");l=t;break;case"zoom":nt.zoomable&&(this.zoom(function(n,t,i,r,u,f){return(g(u*u+f*f)-g(i*i+r*r))/g(n*n+t*t)}(b.width,b.height,e(this.startX-this.startX2),e(this.startY-this.startY2),e(this.endX-this.endX2),e(this.endY-this.endY2))),this.endX2=this.startX2,this.endY2=this.startY2);break;case"crop":n.x&&n.y&&(k=this.$cropper.offset(),s=this.startX-k.left,f=this.startY-k.top,r=a.minWidth,u=a.minHeight,n.x>0?n.y>0?c="se":(c="ne",f-=u):n.y>0?(c="sw",s-=r):(c="nw",s-=r,f-=u),this.cropped||(this.cropped=i,this.$dragger.removeClass(h)))}l&&(a.width=r,a.height=u,a.left=s,a.top=f,this.directive=c,this.renderDragger());this.startX=this.endX;this.startY=this.endY}};u.TEMPLATE=function(n,t){return t=t.split(","),n.replace(/\d+/g,function(n){return t[n]})}('<0 6="5-container"><0 6="5-canvas"><\/0><0 6="5-dragger"><1 6="5-viewer"><\/1><1 6="5-8 8-h"><\/1><1 6="5-8 8-v"><\/1><1 6="5-face" 3-2="all"><\/1><1 6="5-7 7-e" 3-2="e"><\/1><1 6="5-7 7-n" 3-2="n"><\/1><1 6="5-7 7-w" 3-2="w"><\/1><1 6="5-7 7-s" 3-2="s"><\/1><1 6="5-4 4-e" 3-2="e"><\/1><1 6="5-4 4-n" 3-2="n"><\/1><1 6="5-4 4-w" 3-2="w"><\/1><1 6="5-4 4-s" 3-2="s"><\/1><1 6="5-4 4-ne" 3-2="ne"><\/1><1 6="5-4 4-nw" 3-2="nw"><\/1><1 6="5-4 4-sw" 3-2="sw"><\/1><1 6="5-4 4-se" 3-2="se"><\/1><\/0><\/0>',"div,span,directive,data,point,cropper,class,line,dashed");u.DEFAULTS={aspectRatio:"auto",autoCropArea:.8,data:{},done:n.noop,preview:"",multiple:t,autoCrop:i,dragCrop:i,dashed:i,modal:i,movable:i,resizable:i,zoomable:i,rotatable:i,checkImageOrigin:i,minWidth:0,minHeight:0,maxWidth:w,maxHeight:w,build:f,built:f,dragstart:f,dragmove:f,dragend:f};u.setDefaults=function(t){n.extend(u.DEFAULTS,t)};u.other=n.fn.cropper;n.fn.cropper=function(t){var i,r=[].slice.call(arguments,1);return this.each(function(){var e,o=n(this),f=o.data("cropper");f||o.data("cropper",f=new u(this,t));"string"==typeof t&&n.isFunction(e=f[t])&&(i=e.apply(f,r))}),typeof i!==it?i:this};n.fn.cropper.Constructor=u;n.fn.cropper.setDefaults=u.setDefaults;n.fn.cropper.noConflict=function(){return n.fn.cropper=u.other,this}}),function(){$("#ChargePersonName").bsSuggest({allowNoKeyword:!0,multiWord:!0,showHeader:!0,effectiveFieldsAlias:{id:"ä¸»é®",realName:"å§å",userQq:"QQ",departmentName:"é¨é¨"},effectiveFields:["id","realName","userQq","departmentName"],getDataMethod:"url",url:"/User/GetListWithKeywords?keywords=",idField:"id",keyField:"realName"}).on("onSetSelectValue",function(n,t){$("#ChargePersonId").val(t.id)}).on("onUnsetSelectValue",function(){$("#ChargePersonId").val("")})}();